{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$extensionSchemas": ["http://mgi.nist.gov/mgi-json-schema/v0.1"],
    "id": "http://www.nist.gov/od/dm/nerdm-schema/v0.1#",
    "rev": "wd1",
    "title": "The JSON Schema for the NIST Extended Resource Data model (NERDm)",
    "description": "A JSON Schema specfying the core NERDm classes",
    "definitions": {

        "Resource": {
            "description": "a resource (e.g. data collection, service, website or tool) that can participate in a data-driven application",
            "properties": {

                "title": {
                    "title": "Title",
                    "description": "Human-readable, descriptive name of the resource",
                    "notes": [
                        "Acronyms should be avoided"
                    ],
                    "type": "string",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Title",
                        "referenceProperty": "dc:title"
                    }
                },

                "description": {
                    "title": "Description",                    
                    "description": "Human-readable description (e.g., an abstract) of the resource",
                    "notes": [
                        "Each element in the array should be considered a separate paragraph"
                    ],
                    "type": "array",
                    "items": { "type": "string" },
                    "minItems": 1,
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Description",
                        "referenceProperty": "dc:description"
                    }
                },

                "keyword": {
                    "title": "Tags",
                    "description": "Tags (or keywords) help users discover your dataset; please include terms that would be used by technical and non-technical users.",
                    "notes": [
                        "Surround each keyword with quotes. Separate keywords with commas. Avoid duplicate keywords in the same record."
                    ],
                    "type": "array",
                    "minItems": 1,
                    "items": { "type": "string", "minLength": 1 },
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Tags",
                        "referenceProperty": "dcat:keyword"
                    }
                },

                "modified": {
                    "description": "Most recent date on which the dataset was changed, updated or modified.",
                    "notes": [
                        "Dates should be ISO 8601 of highest resolution. In other words, as much of YYYY-MM-DDThh:mm:ss.sTZD as is relevant to this dataset. If there is a need to reflect that the dataset is continually updated, ISO 8601 formatting can account for this with repeating intervals. For instance, R/P1D for daily, R/P2W for every two weeks, and R/PT5M for every five minutes."
                    ],
                    "$ref": "ISO8601DateRange",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Last Update",
                        "referenceProperty": "dc:modified"
                    }
                },

                "issued": {
                    "title": "Release Date",
                    "description": "Date of formal issuance of the resource",
                    "anyOf": [
                        {
                            "type": "string",
                            "pattern": "^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Release Date",
                        "referenceProperty": "dc:issued",
                        "range": "xsd:date"
                    }
                },
                
                "publisher": {
                    "description": "The publishing entity and optionally their parent organization(s).",
                    "notes": [
                        "This is a container for a publisher object which groups together the fields: name and subOrganization. The subOrganization field can also contain a publisher object which allows one to describe an organizationâ€™s hierarchy. Where greater specificity is desired, include as many levels of publisher as is useful, in ascending order, using the below format."
                    ],
                    "$ref": "/definitions/Organization",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Publisher",
                        "referenceProperty": "dc:publisher"
                    }
                },

                "contactPoint": {
                    "description": "Contact information for getting more information about this resource",
                    "notes": [
                        "This should include at least a name and an email address",
                        "The information can reflect either a person or a group (such as a help desk)"
                    ],
                    "$ref": "/definitions/ContactInfo",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Information",
                        "referenceProperty": "dcat:contactPoint"
                    }
                },
                
                "accessLevel": {
                    "title": "Public Access Level",
                    "description": "The degree to which this dataset could be made publicly-available, regardless of whether it has been made available",
                    "notes": [
                    ],
                    "type": "string",
                    "enum": [ "public", "restricted public", "non-public" ],
                    "valueDocumentation": {
                        "public": {
                            "description": "Data asset is or could be made publicly available to all without restrictions"
                        },
                        "restricted public": {
                            "description": "Data asset is available under certain use restrictions"
                        },
                        "non-public": {
                            "description": "Data asset is not available to members of the public"
                        }
                    },
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Public Access Level",
                        "referenceProperty": "pod:accessLevel"
                    }
                },

                "license": {
                    "title": "License",
                    "description": "A pointer to the primary license or non-license (i.e. Public Domain) statement with which the dataset or API has been published",
                    "notes": [
                        "Software and data developed primarily by federal employees must be considered in the public domain; software primarily developed by contract can be assigned a license, including an open source license.",
                        "By default, NIST-produced data and software should point to http://www.nist.gov/data/license.cfm",
                        "See Open Licenses (https://project-open-data.cio.gov/open-licenses/) for more information."
                    ],
                    "anyOf": [
                        {
                            "type": "string",
                            "format": "uri"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "License",
                        "referenceProperty": "dc:license"
                    }
                },

                "rights": { 
                    "title": "Rights",
                    "description": "information regarding access or restrictions based on privacy, security, or other policies",
                    "notes": [
                        "This should also provide an explanation for the selected \"accessLevel\" including instructions for how to access a restricted file, if applicable, or explanation for why a \"non-public\" or \"restricted public\" data assetis not \"public,\" if applicable.",
                        "Text must be 255 or fewer characters."
                    ],
                    "anyOf": [
                        {
                            "type": "string",
                            "minLength": 1,
                            "maxLength": 255
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Rights",
                        "referenceProperty": "dc:rights"
                    }
                },

                "isPartOf": {
                    "title": "Collection",
                    "description": "The collection of which the dataset is a subset",
                    "$ref": "/definitions/ResourceReference",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Collection",
                        "referenceProperty": "dc:isPartOf"
                    }
                },
                
                "language": {
                    "title": "Language",
                    "description": "The primary language used in the dataset",
                    "anyOf": [
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "pattern": "^(((([A-Za-z]{2,3}(-([A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?)|[A-Za-z]{4}|[A-Za-z]{5,8})(-([A-Za-z]{4}))?(-([A-Za-z]{2}|[0-9]{3}))?(-([A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*(-([0-9A-WY-Za-wy-z](-[A-Za-z0-9]{2,8})+))*(-(x(-[A-Za-z0-9]{1,8})+))?)|(x(-[A-Za-z0-9]{1,8})+)|((en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)))$"
                            }
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Language",
                        "referenceProperty": "dc:language"
                    }
                },
                
                "landingPage": {
                    "title": "Homepage URL",
                    "description": "a URL to a human-friendly web page that represents the home or gateway to the resources that are part of this dataset.",
                    "anyOf": [
                        {
                            "type": "string",
                            "format": "uri"
                        },
                        {
                            "type": "null"
                        }
                    ],
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Homepage URL",
                        "referenceProperty": "foaf:homepage"
                    }
                },
                
                "references": {
                    "title": "Related Documents",
                    "description": "Related documents such as technical information about a dataset, developer documentation, etc.",
                    "anyOf": [
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "format": "uri"
                            },
                            "minItems": 1,
                            "uniqueItems": true
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                
                "theme": {
                    "title": "Category",
                    "description": "Main thematic category of the dataset.",
                    "notes": [
                        "Could include ISO Topic Categories (http://www.isotopicmaps.org/)"
                    ],
                    "anyOf": [
                        {
                            "type": "array",
                            "items": {
                                "type": "string",
                                "minLength": 1
                            },
                            "minItems": 1,
                            "uniqueItems": true
                        },
                        {
                            "type": "null"
                        }
                    ]
                },

                "@id": {
                    "description": "A (primary) unique identifier for the resource",
                    "notes": [
                        "It is expected that this field will contain a type of identifier that is of a uniform type across all resource descriptions in the system",
                        "This identifier should, by default, resolve to the metadata record (or some rendering of it) rather than to the resource itself (e.g. via its landing page)."
                    ],
                    "type": "string",
                    "minLength": 5,
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Unique Identifier",
                        "referenceProperty": "dc:identifier"
                    }
                },

                "doi": {
                    "description": "A Digital Object Identifier (DOI) in non-resolving form.",
                    "notes": [
                        "The DOI value should not have the resolver URI base, but should have the form 'doi:NNNNN/XXXXXX'",
                        "It is expected that this will primarily be Datacite DOIs"
                    ],
                    "type": "string",
                    "pattern": "^doi:[0-9]+/.*$",
                    "minLength": 5,
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Unique Identifier",
                        "referenceProperty": "dc:identifier"
                    }
                },

                "@type": {
                    "description":  "the linked-data class types for this resource",
                    "notes": [
                        "The value must always be given as an array, even when only one type is provided.",
                        "Multiple values indicate that the Resource can be considered of multiple types",
                        "If this resource is not to be considered a subtype of the nrd:Resource, its value should be 'nrd:Resource'."
                        
                    ],
                    "type": "array",
                    "items": { "type": "string" } 
                },

                "resourceType": {
                    "description": "the subclasses of a NERDm Resource that this resource can be categorized as",
                    "notes": [
                        "Class labels have the form 'subclass [: subclass ...]' in which each colon-separated name is the name of a class that is a direct child of the class given just before it.",
                        "Classes listed here can imply the existence of particular properties",
                        "The $extendedSchemas property can be used as a sibling to validate this resource node against all relevent subclass types.",
                        "The @type property can be used as a sibling indicate the primary resource type for compliance with JSON-LD"
                    ],
                    "type": "array",
                    "items": { "type": "string" }
                }

            },

            "required": [
                "title", "description", "identifier", "landingPage",
                "publisher", "contactPoint", "accessLevel"
            ]
        },

        "ResourceReference": {
            "description":  "a reference to another resource that may have an associated ID",
            "notes": [
                "While providing a @type property is recommended, it is required if the @id is given."
            ],
            "type": "object",
            "properties": {
                "title": {
                    "description": "the name of the resource being referenced",
                    "notes": [
                        "This value is intended for display.",
                        "This can be, but is not required to be, the same title given in the metadata record describing the resource"
                    ],
                    "type": "string",
                    "minLength": 1
                },
                "@id": {
                    "description": "the local identifier for the referenced resource that resolves (preferentially) to a local description",
                    "type": "string",
                    "format": "uri"
                },
                "@type": {
                    "description":  "the linked-data class types for the referenced resource",
                    "notes": [
                        "The value must always be given as an array, even when only one type is provided.",
                        "Multiple values indicate that the Resource can be considered of multiple types; it is recommended that the primary type (usually the most specific) should be given first.",
                        "If this resource is not to be considered a subtype of the nrd:Resource, its value should be 'nrd:Resource'."
                        
                    ],
                    "type": "array",
                    "items": { "type": "string" } 
                    
                }
            },
            "required": [ "title" ],
            "dependencies": {
                "@id": {
                    "required": [ "@type" ]
                }
            }
        },

        "ISO8601DateRange": {
            "title": "Last Update",
            "description": "a single date-time or a date-time range",
            "anyOf": [
                {
                  "type": "string",
                  "pattern": "^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$"
                },
                {
                  "type": "string",
                  "pattern": "^(R\\d*\\/)?P(?:\\d+(?:\\.\\d+)?Y)?(?:\\d+(?:\\.\\d+)?M)?(?:\\d+(?:\\.\\d+)?W)?(?:\\d+(?:\\.\\d+)?D)?(?:T(?:\\d+(?:\\.\\d+)?H)?(?:\\d+(?:\\.\\d+)?M)?(?:\\d+(?:\\.\\d+)?S)?)?$"
                },
                {
                  "type": "string",
                  "pattern": "^(R\\d*\\/)?([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\4([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24\\:?00)([\\.,]\\d+(?!:))?)?(\\18[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?(\\/)P(?:\\d+(?:\\.\\d+)?Y)?(?:\\d+(?:\\.\\d+)?M)?(?:\\d+(?:\\.\\d+)?W)?(?:\\d+(?:\\.\\d+)?D)?(?:T(?:\\d+(?:\\.\\d+)?H)?(?:\\d+(?:\\.\\d+)?M)?(?:\\d+(?:\\.\\d+)?S)?)?$"
                }
            ]
        },

        "Organization": {
            "description": "a named organization that may be part of a larger organization",
            "type": "object",
            "properties": {
                "@type": {
                    "title": "Metadata Context",
                    "description": "IRI for the JSON-LD data type. This should be org:Organization for each publisher",
                    "type": "string",
                    "enum": [ "org:Organization" ]
                },
                "name": {
                    "title": "Publisher Name",
                    "description": "The plain-text name of the organization",
                    "type": "string",
                    "minLength": 1,
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "referenceProperty": "skos:prefLabel"
                    }
                },
                "subOrganizationOf": {
                    "description": "A parent organizational entity",
                    "$ref": "/definitions/Organization",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "referenceProperty": "org:subOrganizationOf"
                    }
                }
            },
            "required": [ "name" ]
        },

        "ContactInfo": {
            "description": "Information describing various ways to contact an entity",
            "notes": [
            ],
            "properties": {
                "@type": {
                    "type": "string",
                    "enum": [ "vcard:Contact" ]
                },
                "fn": {
                    "title": "Contact Name",
                    "description": "full name of the contact person, role, or organization",
                    "type": "string",
                    "minLength": 1,
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Name",
                        "referenceProperty": "vcard:fn"
                    }
                },
            
                "email": {
                    "title": "Email",
                    "description": "The email address of the resource contact",
                    "type": "string",
                    "pattern": "^[\\w\\_\\~\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=\\:.-]+@[\\w.-]+\\.[\\w.-]+?$",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Email",
                        "referenceProperty": "vcard:hasEmail"
                    }
                },

                "postalAddress": {
                    "description": "the contact mailing address",
                    "notes": [
                    ],
                    "$ref": "/definitions/PostalAddress",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Address",
                        "referenceProperty": "vcard:hasAddress"
                    }
                },
                "phoneNumber": {
                    "description": "the contact telephone number",
                    "notes": [ "Complete international dialing codes should be given, e.g. '+1-410-338-1234'" ],
                    "type" : "string",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Phone Number",
                        "referenceProperty": "vcard:hasTelephone"
                    }
                },
                "timezone": {
                    "description": "the time zone where the contact typically operates",
                    "type" : "string",
                    "pattern": "^[-+][0-9]{4}$",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Contact Address",
                        "referenceProperty": "transit:timezone"
                    }
                }
                
            },
            "asOntology": {
                "@context": "profile-schema-onto.json",
                "@id": "pod:ContactPerson",
                "@type": "owl:Class",
                "prefLabel": "Contact Information",
                "referenceClass": "vcard:Contact"
            }
        },

        "Identifier": {
            "description":  "a complete description of an identifier, including the scheme that it adheres to",
            "title": "Identifier",
            "properties": {
                "scheme": {
                    "description": "a label indicating the system that the identifier adheres to",
                    "notes": [
                        "this label may imply a particular resolver to use"
                    ],
                    "type": "string",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Identifier System",
                        "referenceProperty": "mads:idScheme"
                    }
                },

                "value": {
                    "description": "the value of the identifier",
                    "notes": [
                        "if no scheme is provided, a URI form of the identifier should be given"
                    ],
                    "type": "string",
                    "asOntology": {
                        "@context": "profile-schema-onto.json",
                        "prefLabel": "Identifier System",
                        "referenceProperty": "mads:idValue"
                    }
                }

            },
            "required": [ "value" ],
            "asOntology": {
                "@context": "profile-schema-onto.json",
                "@id": "mads:Identifier",
                "@type": "owl:Class",
                "prefLabel": "Identifier information",
                "referenceClass": "mads:Identifier"
            }
        }
    }
}
